(this["webpackJsonplapa-app"]=this["webpackJsonplapa-app"]||[]).push([[0],{113:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),a=n(16),s=n(9),c=n(1),o=function(e){return{isAuth:e.auth.isAuth}},i=function(e){return Object(a.b)(o)((function(t){return t.isAuth?Object(c.jsx)(e,Object(r.a)({},t)):Object(c.jsx)(s.a,{to:"/login"})}))}},114:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4),a=n(2),s=n(12),c="lapa-app/dialogs-reducer/ADD-MESSAGE",o=function(e){return{type:c,message:e}},i={dialogs:[{id:Object(s.v1)(),name:"Pashka"},{id:Object(s.v1)(),name:"Maks"},{id:Object(s.v1)(),name:"Vlados"},{id:Object(s.v1)(),name:"Leha"},{id:Object(s.v1)(),name:"Dima"}],messages:[{id:Object(s.v1)(),message:"Hi"},{id:Object(s.v1)(),message:"How are you?"},{id:Object(s.v1)(),message:"I am fine"}]};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var n={id:Object(s.v1)(),message:t.message};return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[n])});default:return e}}},116:function(e,t,n){e.exports={nav:"Navigations_nav__i3OCr"}},117:function(e,t,n){e.exports={item:"Friend_item__2ZHma"}},118:function(e,t,n){e.exports={nav:"NavbarRight_nav__3hk_H"}},126:function(e,t,n){e.exports={avatarWrapper:"Avatar_avatarWrapper__3kRML"}},127:function(e,t,n){e.exports={wrapper:"Profile_wrapper__2KngV"}},128:function(e,t,n){e.exports={logo:"Logo_logo__3fZgA"}},129:function(e,t,n){e.exports={search:"Search_search__3XdfZ"}},130:function(e,t,n){e.exports={widgets:"Widgets_widgets__EfZB_"}},137:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(56),c=n.n(s),o=n(5),i=n(6),u=n(10),l=n(11),p=(n(137),n(20)),d=n(63),j=n.n(d),b=n(1),f=function(e){return Object(b.jsx)("div",{className:j.a.item,children:Object(b.jsx)(p.b,{to:e.link,activeClassName:j.a.active,className:j.a.itemLink,children:e.menu})})},h=n(116),O=n.n(h),g=function(){return Object(b.jsxs)("nav",{className:O.a.nav,children:[Object(b.jsx)(f,{menu:"Profile",link:"/profile"}),Object(b.jsx)(f,{menu:"Messages",link:"/dialogs"}),Object(b.jsx)(f,{menu:"Users",link:"/users"}),Object(b.jsx)(f,{menu:"News",link:"/news"}),Object(b.jsx)(f,{menu:"Music",link:"/music"}),Object(b.jsx)(f,{menu:"Settings",link:"/settings"})]})},m=function(){return Object(b.jsx)(g,{})},v=n(117),x=n.n(v),w=function(e){return Object(b.jsx)("div",{className:x.a.item,children:Object(b.jsx)(p.b,{to:e.name,children:e.name})},e.id)},P=n(118),_=n.n(P),k=function(e){var t=e.friends.map((function(e){return Object(b.jsx)(w,{id:e.id,name:e.name},e.id)}));return Object(b.jsx)("nav",{className:_.a.nav,children:t})},y=n(9),A=n(16),F=n(3),S=n.n(F),C=n(7),I=n(4),N=n(2),U=n(41),E=n.n(U),L=E.a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"ed0fa8fa-ddbb-478a-b370-1f41a9c286be"}}),T={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return L.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},setFollow:function(e){return L.post("follow/".concat(e)).then((function(e){return e.data}))},setUnFollow:function(e){return L.delete("follow/".concat(e)).then((function(e){return e.data}))}},M="lapa-app/users-reducer/IS_FOLLOWING",D="lapa-app/users-reducer/SET_USERS",J="lapa-app/users-reducer/SET_CURRENT_PAGE",R="lapa-app/users-reducer/SET_TOTAL_USERS_COUNT",z="lapa-app/users-reducer/TOGGLE_IS_FETCHING",H="lapa-app/users-reducer/TOGGLE_IS_FOLLOWING_PROGRESS",G={users:[],pageSize:10,totalUserCounter:0,currentPage:1,isFetching:!1,followInProgress:[]},q=function(e,t){return{type:M,userID:e,follow:t}},W=function(e){return{type:D,users:e}},Z=function(e){return{type:J,currentPage:e}},V=function(e){return{type:R,totalCount:e}},B=function(e){return{type:z,isFetching:e}},K=function(e,t){return{type:H,isFetching:e,userId:t}},X=function(){var e=Object(C.a)(S.a.mark((function e(t,n,r,a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(K(!0,n)),e.next=3,r(n);case 3:0===e.sent.resultCode&&t(q(n,a)),t(K(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Y=n.p+"static/media/loader.07928bad.gif",Q=function(){return Object(b.jsx)("div",{children:Object(b.jsx)("img",{src:Y})})},$=n(14),ee=n(64),te=n.n(ee),ne=n(120),re=n.n(ne),ae=function(e){for(var t=e.totalItemsCounter,n=e.pageSize,a=e.currentPage,s=e.onPageClick,c=e.portionSize,o=void 0===c?10:c,i=Math.ceil(t/n),u=[],l=1;l<=i;l++)u.push(l);var p=Math.ceil(i/o),d=Object(r.useState)(1),j=Object($.a)(d,2),f=j[0],h=j[1],O=(f-1)*o+1,g=f*o;return Object(r.useEffect)((function(){h(Math.ceil(a/o))}),[a,o]),Object(b.jsxs)("div",{children:[f>1&&Object(b.jsx)("button",{onClick:function(){return h(f-1)},children:"Prev"}),u.filter((function(e){return e>=O&&e<=g})).map((function(e){return Object(b.jsx)("span",{className:a===e?re()(te.a.selected,te.a.page):te.a.page,onClick:function(){return s(e)},children:e})})),f<p&&Object(b.jsx)("button",{onClick:function(){return h(f+1)},children:"Next"})]})},se=n(65),ce=n.n(se),oe=n.p+"static/media/user.3b87c899.png",ie=function(e){var t=e.user,n=e.followInProgress,r=e.getUnFollow,a=e.getFollow;return Object(b.jsxs)("div",{className:ce.a.wrapper,children:[Object(b.jsxs)("div",{className:ce.a.items,children:[Object(b.jsx)(p.b,{to:"/profile/"+t.id,children:Object(b.jsx)("img",{src:null!=t.photos.small?t.photos.small:oe})}),t.followed?Object(b.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){r(t.id)},children:"Unfollow"}):Object(b.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){a(t.id)},children:"Follow"})]}),Object(b.jsxs)("div",{className:ce.a.info,children:[Object(b.jsx)("div",{children:t.name}),Object(b.jsx)("div",{children:t.status})]})]})},ue=function(e){var t=e.users,n=e.pageSize,r=e.totalUserCounter,a=e.currentPage,s=e.isFetching,c=e.onPageClick,o=(e.toggleIsFollowingProgress,e.followInProgress),i=e.getFollow,u=e.getUnFollow;return Object(b.jsxs)("div",{children:[s?Object(b.jsx)(Q,{}):null,Object(b.jsx)(ae,{pageSize:n,totalItemsCounter:r,currentPage:a,onPageClick:c}),t.map((function(e){return Object(b.jsx)(ie,{user:e,followInProgress:o,getFollow:i,getUnFollow:u},e.id)}))]})},le=function(e){return e.users.users},pe=function(e){return e.users.pageSize},de=function(e){return e.users.totalUserCounter},je=function(e){return e.users.currentPage},be=function(e){return e.users.isFetching},fe=function(e){return e.users.followInProgress},he=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onPageClick=function(t){e.props.getPage(t,e.props.pageSize)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(b.jsx)(ue,{users:this.props.users,pageSize:this.props.pageSize,totalUserCounter:this.props.totalUserCounter,currentPage:this.props.currentPage,onPageClick:this.onPageClick,isFetching:this.props.isFetching,toggleIsFollowingProgress:this.props.toggleIsFollowingProgress,followInProgress:this.props.followInProgress,getFollow:this.props.getFollow,getUnFollow:this.props.getUnFollow})}}]),n}(a.a.Component),Oe=Object(A.b)((function(e){return{users:le(e),pageSize:pe(e),totalUserCounter:de(e),currentPage:je(e),isFetching:be(e),followInProgress:fe(e)}}),{setCurrentPage:Z,setTotalUsersCount:V,toggleIsFollowingProgress:K,getUsers:function(e,t){return function(){var n=Object(C.a)(S.a.mark((function n(r){var a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(B(!0)),n.next=3,T.getUsers(e,t);case 3:a=n.sent,r(B(!1)),r(W(a.items)),r(V(a.totalCount));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},getPage:function(e,t){return function(){var n=Object(C.a)(S.a.mark((function n(r){var a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(B(!0)),r(Z(e)),n.next=4,T.getUsers(e,t);case 4:a=n.sent,r(B(!1)),r(W(a.items));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},getFollow:function(e){return function(){var t=Object(C.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=T.setFollow.bind(T),t.next=3,X(n,e,r,!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUnFollow:function(e){return function(){var t=Object(C.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=T.setUnFollow.bind(T),t.next=3,X(n,e,r,!1);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(he),ge=n(12),me=E.a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"ed0fa8fa-ddbb-478a-b370-1f41a9c286be"}}),ve=function(e){return me.get("profile/".concat(e))},xe=function(e){return me.get("profile/status/".concat(e))},we=function(e){return me.put("profile/status",{status:e})},Pe=function(e){var t=new FormData;return t.append("image",e),me.put("profile/photo",t,{headers:{"Content-type":"multipart/form-data"}})},_e=function(e){return me.put("profile",e)},ke="lapa-app/profile-reducer/ADD-POST",ye="lapa-app/profile-reducer/DELETE-POST",Ae="lapa-app/profile-reducer/SET_USER_PROFILE",Fe="lapa-app/profile-reducer/SET_STATUS",Se="lapa-app/profile-reducer/UPDATE_PHOTO",Ce="lapa-app/profile-reducer/UPDATE_PROFILE",Ie=function(e){return{type:Ae,profile:e}},Ne=function(e){return{type:Fe,status:e}},Ue=function(e){return{type:Se,photo:e}},Ee=function(e){return{type:Ce,profile:e}},Le={posts:[{id:Object(ge.v1)(),postMessage:"Hi, I'm Pavel",likes:10},{id:Object(ge.v1)(),postMessage:"Let's go to learn a React",likes:9},{id:Object(ge.v1)(),postMessage:"Also we need improve our html/css skills",likes:11},{id:Object(ge.v1)(),postMessage:"Then we'll learn Redux",likes:22}],profile:{aboutMe:"",userId:0,fullName:"",photos:{small:"",large:""},contacts:{},lookingForAJobDescription:"",lookingForAJob:!1},status:""},Te=function(e){return function(){var t=Object(C.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ve(e);case 2:r=t.sent,n(Ie(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Me=n(29),De=n(66),Je=n.n(De),Re=a.a.memo((function(e){return Object(b.jsxs)("div",{className:Je.a.item,children:[Object(b.jsx)("div",{className:Je.a.postMessage,children:e.message}),Object(b.jsxs)("div",{className:Je.a.postLikes,children:["Likes: ",e.likes]})]},e.id)})),ze=n(47),He=n.n(ze),Ge=n(46),qe=n(57),We=function(e){var t=e.addPost;Object(Me.a)(e,["addPost"]);return Object(b.jsx)(Ge.d,{initialValues:{post:""},validateOnBlur:!0,validationSchema:qe.c,onSubmit:function(e,n){var r=n.setSubmitting;t(e.post),r(!1)},children:function(e){var t=e.isSubmitting,n=e.errors,r=e.touched,a=e.dirty,s=e.isValid;return Object(b.jsxs)(Ge.c,{children:[Object(b.jsx)(Ge.b,{name:"post",as:"textarea",className:"form-textarea",placeholder:"Enter a post..."}),r.post&&n.post&&Object(b.jsx)(Ge.a,{name:"post",component:"div"}),Object(b.jsx)("button",{type:"submit",disabled:t&&!s&&!a,children:"Send"})]})}})},Ze=a.a.memo((function(e){var t=e.addPost,n=e.myPost,r=(e.newPost,e.posts),a=(Object(Me.a)(e,["addPost","myPost","newPost","posts"]),r.map((function(e){return Object(b.jsx)(Re,{message:e.postMessage,likes:e.likes,id:e.id},e.id)})));return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:He.a.postHeader,children:[Object(b.jsx)("div",{className:He.a.itemWrapper,children:Object(b.jsxs)("h2",{children:[n," "]})}),Object(b.jsx)("div",{className:He.a.item,children:Object(b.jsx)(We,{addPost:t})})]}),Object(b.jsx)("div",{className:He.a.posts,children:a})]})})),Ve=Object(A.b)((function(e){return{myPost:e.profilePage.myPost,newPost:e.profilePage.newPost,posts:e.profilePage.posts}}),{addPost:function(e){return function(t){t(function(e){return{type:ke,post:e}}(e))}}})(Ze),Be=n(126),Ke=n.n(Be),Xe=function(e){return Object(b.jsx)("div",{className:Ke.a.avatarWrapper,children:Object(b.jsx)("img",{src:e.imgAdress})})},Ye=n(127),Qe=n.n(Ye),$e=function(e){var t=Object(r.useState)(!1),n=Object($.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(e.status),o=Object($.a)(c,2),i=o[0],u=o[1];Object(r.useEffect)((function(){u(e.status)}),[e.status]);return Object(b.jsxs)("div",{children:[!a&&Object(b.jsx)("div",{children:Object(b.jsx)("span",{onDoubleClick:function(){s(!0)},children:e.status||"clear status"})}),a&&Object(b.jsx)("div",{children:Object(b.jsx)("input",{autoFocus:!0,onChange:function(e){u(e.currentTarget.value)},value:i,onBlur:function(){s(!1),e.updateStatus(i)}})})]})},et=function(e){e.profile;return Object(b.jsxs)("div",{className:Qe.a.wrapper,children:[Object(b.jsx)(Xe,{imgAdress:e.profile.photos.large}),Object(b.jsx)($e,{status:e.status,updateStatus:e.updateStatus}),Object(b.jsx)("input",{type:"file",name:"myImg",onChange:function(t){t.target.files&&e.updateLargePhoto(t.target.files[0])}}),Object(b.jsx)(tt,Object(N.a)(Object(N.a)({},e.profile),{},{updateProfile:e.updateProfile}))]})},tt=function(e){var t=e.aboutMe,n=e.userId,a=e.fullName,s=e.lookingForAJob,c=e.lookingForAJobDescription,o=e.contacts,i=Object(Me.a)(e,["aboutMe","userId","fullName","lookingForAJob","lookingForAJobDescription","contacts"]),u=Object(r.useState)(!1),l=Object($.a)(u,2),p=l[0],d=l[1],j=Object(r.useState)({aboutMe:t,userId:n,fullName:a,lookingForAJobDescription:c,lookingForAJob:s,contacts:{github:o.github}}),f=Object($.a)(j,2),h=f[0],O=f[1];Object(r.useEffect)((function(){O({aboutMe:t,userId:n,fullName:a,lookingForAJobDescription:c,lookingForAJob:s,contacts:{github:o.github}})}),[t,n,a,s,c,o]);var g=function(e,t){switch(t){case"fullName":return O(Object(N.a)(Object(N.a)({},h),{},{fullName:e.currentTarget.value}));case"aboutMe":return O(Object(N.a)(Object(N.a)({},h),{},{aboutMe:e.currentTarget.value}));case"lookingForAJobDescription":return O(Object(N.a)(Object(N.a)({},h),{},{lookingForAJobDescription:e.currentTarget.value}));case"lookingForAJob":return O(Object(N.a)(Object(N.a)({},h),{},{lookingForAJob:e.currentTarget.checked}));case"contacts.github":return O(Object(N.a)(Object(N.a)({},h),{},{contacts:Object(N.a)(Object(N.a)({},o),{},{github:e.currentTarget.value})}));default:return h}};return Object(b.jsxs)("div",{children:[!p&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{children:["About me: ",t]}),Object(b.jsxs)("div",{children:["Fullname: ",a]}),Object(b.jsxs)("div",{children:["lookingForAJobDescription: ",c]}),Object(b.jsxs)("div",{children:["lookingForAJob: ",s?"yes":"no"]}),Object(b.jsxs)("div",{children:["contacts: ",Object(b.jsx)("span",{children:Object(b.jsx)("a",{href:o.github,target:"_blank",children:o.github})})]})]}),p&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{children:["About me: ",Object(b.jsx)("input",{type:"text",value:h.aboutMe,onChange:function(e){return g(e,"aboutMe")}})]}),Object(b.jsxs)("div",{children:["Fullname: ",Object(b.jsx)("input",{type:"text",value:h.fullName,onChange:function(e){return g(e,"fullName")}})]}),Object(b.jsxs)("div",{children:["lookingForAJobDescription: ",Object(b.jsx)("input",{type:"text",value:h.lookingForAJobDescription,onChange:function(e){return g(e,"lookingForAJobDescription")}})]}),Object(b.jsxs)("div",{children:["lookingForAJob: ",Object(b.jsx)("input",{type:"checkbox",checked:h.lookingForAJob,onChange:function(e){return g(e,"lookingForAJob")}})]}),Object(b.jsxs)("div",{children:["contacts: ",Object(b.jsx)("input",{type:"text",value:h.contacts.github,onChange:function(e){return g(e,"contacts.github")}})]})]}),p?Object(b.jsx)("button",{onClick:function(){d(!1),i.updateProfile({aboutMe:h.aboutMe,userId:h.userId,fullName:h.fullName,lookingForAJobDescription:h.lookingForAJobDescription,lookingForAJob:h.lookingForAJob,contacts:{github:h.contacts.github}})},children:"Save"}):Object(b.jsx)("button",{onClick:function(){d(!0)},children:"Edit"})]})},nt=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)(et,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,updateLargePhoto:e.updateLargePhoto,updateProfile:e.updateProfile}),Object(b.jsx)(Ve,{})]})},rt=n(113),at=n(25),st=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e="21095"),this.props.getProfile(e),this.props.getStatus(e)}},{key:"render",value:function(){return Object(b.jsx)(nt,Object(N.a)(Object(N.a)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,updateLargePhoto:this.props.updateLargePhoto,updateProfile:this.props.updateProfile}))}}]),n}(a.a.Component),ct=Object(at.c)(Object(A.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,isAuth:e.auth.isAuth}}),{setUserProfile:Ie,getProfile:Te,getStatus:function(e){return function(){var t=Object(C.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xe(e);case 2:r=t.sent,n(Ne(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(C.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,we(e);case 2:0===t.sent.data.resultCode&&n(Ne(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateLargePhoto:function(e){return function(){var t=Object(C.a)(S.a.mark((function t(n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pe(e);case 2:0===(r=t.sent).data.resultCode&&n(Ue(r.data.data.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateProfile:function(e){return function(){var t=Object(C.a)(S.a.mark((function t(n,r){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_e(e);case 2:0===t.sent.data.resultCode&&(n(Ee(e)),n(Te(r().auth.userId)));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),y.g,rt.a)(st),ot=E.a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/"}),it=function(){return ot.get("auth/me").then((function(e){return e.data}))},ut=function(e){return ot.post("auth/login",Object(N.a)({},e))},lt=function(){return ot.delete("auth/login")},pt=function(){return ot.get("security/get-captcha-url")},dt="lapa-app/login-reducer/SET_LOGIN",jt="lapa-app/login-reducer/SET_CAPTCHA",bt={data:{login:"",password:""},captchaUrl:""},ft=function(){return function(){var e=Object(C.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pt();case 3:(n=e.sent).data.url&&t((r=n.data.url,{type:jt,captchaUrl:r})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}var r}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},ht="lapa-app/auth-reducer/SET_AUTH_DATA",Ot="lapa-app/auth-reducer/SET_USER_PHOTO",gt="lapa-app/auth-reducer/SET_AUTH_CHANGE",mt="lapa-app/auth-reducer/GET_LOGIN_ERROR",vt=function(e,t,n){return{type:ht,data:{userId:e,login:t,email:n}}},xt=function(e){return{type:Ot,photos:e}},wt=function(e){return{type:gt,isAuth:e}},Pt={userId:0,login:"",email:"",isAuth:!1,photos:{large:"",small:""}},_t=n(79),kt=n.n(_t),yt=n(128),At=n.n(yt),Ft=n.p+"static/media/lapa-logo.365a972e.png",St=function(){return Object(b.jsx)("div",{className:At.a.logo,children:Object(b.jsx)("img",{src:Ft,alt:""})})},Ct=n(129),It=n.n(Ct),Nt=function(){return Object(b.jsx)("div",{className:It.a.search,children:Object(b.jsx)("input",{type:"text"})})},Ut=function(e){return Object(b.jsx)("img",{src:e.src})},Et=n(130),Lt=n.n(Et),Tt=function(e){return Object(b.jsxs)("div",{className:Lt.a.widgets,children:[Object(b.jsx)(Ut,{src:"https://icon-library.com/images/send-message-icon-png/send-message-icon-png-29.jpg"}),Object(b.jsx)(Ut,{src:"https://png.pngtree.com/png-vector/20190411/ourlarge/pngtree-vector-bell-icon-png-image_927119.jpg"}),Object(b.jsx)(Ut,{src:e.smallPhoto})]})},Mt=function(e){var t=e.setLogOut,n=Object(Me.a)(e,["setLogOut"]);return Object(b.jsxs)("header",{className:kt.a.header,children:[Object(b.jsx)(St,{}),Object(b.jsx)(Nt,{}),n.isAuth?Object(b.jsxs)("div",{className:kt.a.widgets,children:[n.login,Object(b.jsx)(Tt,{smallPhoto:n.smallPhoto}),Object(b.jsx)("button",{onClick:function(){t()},children:"Log out"})]}):Object(b.jsx)(p.b,{to:"/login",children:"Login"})]})},Dt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(b.jsx)(Mt,Object(N.a)(Object(N.a)({},this.props),{},{login:this.props.login,isAuth:this.props.isAuth,smallPhoto:this.props.smallPhoto,setLogOut:this.props.setLogOut}))}}]),n}(a.a.Component),Jt=Object(A.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,smallPhoto:e.auth.photos.small}}),{setAuthData:vt,setUserPhoto:xt,setLogOut:function(){return function(){var e=Object(C.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lt();case 3:0===e.sent.data.resultCode&&t(wt(!1)),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})(Dt),Rt=n(32),zt=n(132),Ht=Object(A.b)((function(e){return{login:e.login.data.login,password:e.login.data.password,isAuth:e.auth.isAuth,errorMessage:e.auth.errorMessage,captchaUrl:e.login.captchaUrl}}),{setLoginData:function(e){return{type:dt,data:e}},setAuth:function(e,t,n,r){return function(){var a=Object(C.a)(S.a.mark((function a(s){var c;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ut({email:e,password:t,rememberMe:n,captcha:r});case 3:21095===(c=a.sent).data.data.userId?s(wt(!0)):(10===c.data.resultCode&&s(ft()),s((o=c.data.messages[0],{type:mt,message:o}))),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(0);case 9:case"end":return a.stop()}var o}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},getCaptchaUrl:ft})((function(e){var t=Object(Rt.d)({resolver:Object(zt.a)(qe.a)}),n=t.register,r=t.handleSubmit,a=t.formState.errors,s=function(t,n,r,a){e.setAuth(t,n,r,a)};return e.isAuth?Object(b.jsx)(y.a,{to:"/profile"}):Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"LOGIN PAGE"}),Object(b.jsxs)("form",{onSubmit:r((function(t){s(t.login,t.password,t.rememberMe,t.captcha),e.setLoginData(t)})),children:[Object(b.jsx)("div",{children:Object(b.jsx)("input",Object(N.a)({defaultValue:""},n("login",{required:!0,pattern:/^[A-Za-z]+$/i})))}),e.errorMessage&&Object(b.jsx)("span",{children:e.errorMessage}),a.login&&Object(b.jsx)("span",{children:"This field is required"}),Object(b.jsx)("div",{children:Object(b.jsx)("input",Object(N.a)({defaultValue:"",type:"password"},n("password",{required:!0})))}),a.password&&Object(b.jsx)("span",{children:a.password.message}),Object(b.jsx)("div",{children:Object(b.jsx)("input",Object(N.a)({type:"checkbox"},n("rememberMe")))}),e.captchaUrl&&Object(b.jsxs)("div",{children:[Object(b.jsx)("img",{src:e.captchaUrl,style:{width:"200px"}}),Object(b.jsx)("input",Object(N.a)({type:"text"},n("captcha")))]}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{type:"submit"})})]})]})})),Gt="lapa-app/app-reducer/SET_INITIALIZED",qt={initialized:!1},Wt=a.a.lazy((function(){return n.e(3).then(n.bind(null,269))})),Zt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).catchAllUnhandledErrors=function(e){alert("Some error"),console.error(e)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.initializedTC(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.initialized?Object(b.jsxs)("div",{className:"app-wrapper",children:[Object(b.jsx)(Jt,{}),Object(b.jsx)(m,{}),Object(b.jsx)(k,{friends:this.props.friends}),Object(b.jsx)("div",{className:"app-wrapper-content",children:Object(b.jsx)(r.Suspense,{fallback:Object(b.jsx)(Q,{}),children:Object(b.jsxs)(y.d,{children:[Object(b.jsx)(y.b,{path:"/profile/:userId?",render:function(){return Object(b.jsx)(ct,{})}}),Object(b.jsx)(y.b,{path:"/dialogs",render:function(){return Object(b.jsx)(Wt,{})}}),Object(b.jsx)(y.b,{path:"/users",render:function(){return Object(b.jsx)(Oe,{})}}),Object(b.jsx)(y.b,{path:"/login",render:function(){return Object(b.jsx)(Ht,{})}}),Object(b.jsx)(y.b,{exact:!0,path:"*",render:function(){return Object(b.jsx)("div",{children:"404 PAGE NOT FOUND"})}})]})})})]}):Object(b.jsx)(Q,{})}}]),n}(a.a.Component),Vt=Object(at.c)(y.g,Object(A.b)((function(e){return{friends:e.navbarRight.friends,initialized:e.app.initialized}}),{initializedTC:function(){return function(e){e(function(){var e=Object(C.a)(S.a.mark((function e(t){var n,r,a,s,c,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,it();case 3:if(0!==(n=e.sent).resultCode){e.next=11;break}return r=n.data,a=r.id,s=r.login,c=r.email,t(vt(a,s,c)),e.next=9,ve(a);case 9:o=e.sent,t(xt(o.data.photos));case 11:return e.abrupt("return",n);case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()).then((function(){e({type:Gt,initialized:!0})}))}}}))(Zt),Bt=(n(263),function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,268)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))}),Kt=n(114),Xt={friends:[{id:Object(ge.v1)(),name:"Pashka"},{id:Object(ge.v1)(),name:"Maks"},{id:Object(ge.v1)(),name:"Vlad"},{id:Object(ge.v1)(),name:"Leha"}]},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt;return e},Qt=n(131),$t=Object(at.b)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke:var n={id:Object(ge.v1)(),postMessage:t.post,likes:0};return Object(N.a)(Object(N.a)({},e),{},{posts:[].concat(Object(I.a)(e.posts),[n])});case ye:return Object(N.a)(Object(N.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case Ae:return Object(N.a)(Object(N.a)({},e),{},{profile:t.profile});case Fe:return Object(N.a)(Object(N.a)({},e),{},{status:t.status});case Se:return Object(N.a)(Object(N.a)({},e),{},{profile:Object(N.a)(Object(N.a)({},e.profile),{},{photos:t.photo})});case Ce:return Object(N.a)(Object(N.a)({},e),{},{profile:Object(N.a)(Object(N.a)({},e.profile),t.profile)});default:return e}},dialogsPage:Kt.b,navbarRight:Yt,users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(N.a)(Object(N.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(N.a)(Object(N.a)({},e),{},{followed:t.follow}):e}))});case D:return Object(N.a)(Object(N.a)({},e),{},{users:t.users});case J:return Object(N.a)(Object(N.a)({},e),{},{currentPage:t.currentPage});case R:return Object(N.a)(Object(N.a)({},e),{},{totalUserCounter:t.totalCount});case z:return Object(N.a)(Object(N.a)({},e),{},{isFetching:t.isFetching});case H:return Object(N.a)(Object(N.a)({},e),{},{followInProgress:t.isFetching?[].concat(Object(I.a)(e.followInProgress),[t.userId]):e.followInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:return Object(N.a)(Object(N.a)(Object(N.a)({},e),t.data),{},{isAuth:!0});case Ot:return Object(N.a)(Object(N.a)({},e),{},{photos:Object(N.a)({},t.photos)});case gt:return Object(N.a)(Object(N.a)({},e),{},{isAuth:t.isAuth});case mt:return Object(N.a)(Object(N.a)({},e),{},{errorMessage:t.message});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dt:return Object(N.a)(Object(N.a)({},e),{},{data:t.data});case jt:return Object(N.a)(Object(N.a)({},e),{},{captchaUrl:t.captchaUrl});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Gt:return Object(N.a)(Object(N.a)({},e),{},{initialized:t.initialized});default:return e}}}),en=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||at.c,tn=Object(at.d)($t,en(Object(at.a)(Qt.a)));c.a.render(Object(b.jsx)(p.a,{children:Object(b.jsx)(A.a,{store:tn,children:Object(b.jsx)(Vt,{})})}),document.getElementById("root")),window.store=tn,Bt()},47:function(e,t,n){e.exports={itemWrapper:"Posts_itemWrapper__3cvvo",item:"Posts_item__3jmKr",postHeader:"Posts_postHeader__LmL7p",posts:"Posts_posts__12nHS"}},57:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n(34),a=r.a().shape({post:r.b().max(100,"Max length is 100 symbols!").required("Required field")}),s=r.a().shape({message:r.b().max(100,"Max length is 100 symbols!").required("Required field")}),c=r.a({login:r.b().email("Enter valid email"),password:r.b().min(6,"Min length is 6 symbols!")}).required("Required field")},63:function(e,t,n){e.exports={itemLink:"Navigation_itemLink__1CLZX",active:"Navigation_active__ZKPNN",item:"Navigation_item__1Lphm"}},64:function(e,t,n){e.exports={selected:"Paginator_selected__2XwE6",page:"Paginator_page__1xWmB"}},65:function(e,t,n){e.exports={wrapper:"Users_wrapper__IPgt-",info:"Users_info__1grIT",items:"Users_items__26q9j",selected:"Users_selected__322Qs"}},66:function(e,t,n){e.exports={item:"Post_item__5yp1L",postLikes:"Post_postLikes__1z3U8"}},79:function(e,t,n){e.exports={header:"Header_header__2yJqB",widgets:"Header_widgets__2xYpZ"}}},[[264,1,2]]]);
//# sourceMappingURL=main.3aada845.chunk.js.map